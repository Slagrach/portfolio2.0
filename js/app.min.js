
var Ya = Ya || {};
Ya.i18n = function (lang) {
	return this[lang]
};
Ya.i18n.prototype = {
	"en": {
		"browser.amigo": "Amigo",
		"browser.camino": "Camino",
		"browser.chrome": "Google Chrome",
		"browser.chromium": "Chromium",
		"browser.flock": "Flock",
		"browser.fx": "Firefox",
		"browser.ie": "Internet Explorer",
		"browser.iron": "Iron",
		"browser.maxthon": "Maxthon",
		"browser.opera": "Opera",
		"browser.palemoon": "Pale Moon",
		"browser.safari": "Safari",
		"browser.seamonkey": "SeaMonkey",
		"browser.yabrowser": "Yandex Browser",
		"button.download": "Download another browser",
		"button.update": "Update",
		"button.whattodo": "What do I do?",
		"desc": "Your browser has not been updated in several years. During this time, many sites have started to use new technologies that this browser does not support, and as such cannot correctly display this page. To fix this, please install a new browser.",
		"desc.ie": "Microsoft is about to stop supporting or has already stopped supporting your browser, and will not update it anymore. Using this browser could result in errors when viewing websites and poor functionality. We recommend finding a replacement.",
		"subtitle": "Please update it or install %%.",
		"subtitle.ie": "We recommend installing Internet Explorer 11 or %%.",
		"subtitle.ie.link.txt": "select a different application for browsing the internet",
		"subtitle.link.href": "https://yandex.ru/soft/browsers/",
		"subtitle.link.txt": "a new one",
		"title": "Your browser %% is out of date and does not provide you with a complete site experience, or keep you safe while browsing",
		"title.general": "Your browser is out of date",
		"title.general.ie": "Your browser is obsolete and will not be updated any more",
		"title.unknown": "It's possible your browser is out of date and will not provide you with a full site experience, or keep you safe while browsing",
		"ver": "1.3.2"
	}, "ru": {
		"browser.amigo": "Amigo",
		"browser.camino": "Camino",
		"browser.chrome": "Google Chrome",
		"browser.chromium": "Chromium",
		"browser.flock": "Flock",
		"browser.fx": "Firefox",
		"browser.ie": "Internet Explorer",
		"browser.iron": "Iron",
		"browser.maxthon": "Maxthon",
		"browser.opera": "Opera",
		"browser.palemoon": "Pale Moon",
		"browser.safari": "Safari",
		"browser.seamonkey": "SeaMonkey",
		"browser.yabrowser": "Yandex Browser",
		"button.download": "Скачать другой браузер",
		"button.update": "Обновить",
		"button.whattodo": "Что делать?",
		"desc": "Ваш браузер не обновлялся уже несколько лет. За это время некоторые сайты стали использовать новые технологии, которые  он не поддерживает и не может корректно отобразить страницу. Чтобы это исправить, попробуйте установить новый браузер.",
		"desc.ie": "Браузер, которым вы пользуетесь, уже не поддерживается или скоро лишится поддержки Microsoft, поэтому больше не будет обновляться. Это значит, что открытые в нём сайты могут отображаться с ошибками. Рекомендуем вам найти замену.",
		"subtitle": "Пожалуйста, обновите его или установите %%.",
		"subtitle.ie": "Рекомендуем вам установить Internet Explorer 11 или %%.",
		"subtitle.ie.link.txt": "выбрать другую программу для просмотра страниц в интернете",
		"subtitle.link.href": "https://yandex.ru/soft/browsers/",
		"subtitle.link.txt": "новый",
		"title": "Ваш браузер %% устарел и не обеспечивает полноценную и безопасную работу с сайтом",
		"title.general": "Ваш браузер устарел",
		"title.general.ie": "Ваш браузер устарел и больше не будет обновляться",
		"title.unknown": "Возможно, ваш браузер устарел и не обеспечивает полноценную и безопасную работу с сайтом",
		"ver": "1.3.2"
	}, "tr": {
		"browser.amigo": "Amigo",
		"browser.camino": "Camino",
		"browser.chrome": "Google Chrome",
		"browser.chromium": "Chromium",
		"browser.flock": "Flock",
		"browser.fx": "Firefox",
		"browser.ie": "Internet Explorer",
		"browser.iron": "Iron",
		"browser.maxthon": "Maxthon",
		"browser.opera": "Opera",
		"browser.palemoon": "Pale Moon",
		"browser.safari": "Safari",
		"browser.seamonkey": "SeaMonkey",
		"browser.yabrowser": "Yandex Browser",
		"button.download": "Başka bir tarayıcı indir",
		"button.update": "Güncelle",
		"button.whattodo": "Ne yapayım?",
		"desc": "Tarayıcınız en son güncellendiğinden beri birkaç yıl geçti. Bu süre içinde bazı sitelerde tarayıcınızın artık desteklemediği yeni teknolojiler uygulanıyor. Tarayıcınız böyle siteleri doğru görüntülemeyebilir. Bu hatayı düzeltmek için yeni tarayıcıyı yükleyip kurun.",
		"desc.ie": "Kullandığınız tarayıcı Microsoft tarafından artık desteklenmemekte veya bunun desteği önümüzdeki günlerde sonlandırılarak bir daha güncellenmeyecektir. Dolayısıyla web siteleri bu tarayıcıyla hatalı görüntülenebilir. Lütfen başka bir tarayıcı kullanın.",
		"subtitle": "Lütfen tarayıcınızı güncelleyin veya %% yükleyin.",
		"subtitle.ie": "Internet Explorer 11 veya %% kurmanızı öneririz.",
		"subtitle.ie.link.txt": "Web sayfalarının görüntülenmesi için başka bir program seç",
		"subtitle.link.href": "",
		"subtitle.link.txt": "yeni",
		"title": "Kullandığınız tarayıcı (%%) güncel değil. Bu tarayıcıyı kullanarak bu siteyle güvenli ve hatasız çalışamayabilirsiniz",
		"title.general": "Tarayıcınız çok eski",
		"title.general.ie": "Kullandığınız tarayıcı çok eski ve artık güncellenmez",
		"title.unknown": "Tarayıcınız çok eski olabilir. Bu durumda siteyle güvenli ve hatasız çalışmanız mümkün olmayabilir.",
		"ver": "1.3.2"
	}, "uk": {
		"browser.amigo": "Amigo",
		"browser.camino": "Camino",
		"browser.chrome": "Google Chrome",
		"browser.chromium": "Chromium",
		"browser.flock": "Flock",
		"browser.fx": "Firefox",
		"browser.ie": "Internet Explorer",
		"browser.iron": "Iron",
		"browser.maxthon": "Maxthon",
		"browser.opera": "Opera",
		"browser.palemoon": "Pale Moon",
		"browser.safari": "Safari",
		"browser.seamonkey": "SeaMonkey",
		"browser.yabrowser": "Yandex Browser",
		"button.download": "Завантажити інший браузер",
		"button.update": "Оновити",
		"button.whattodo": "Що робити?",
		"desc": "Ваш браузер не оновлювався вже кілька років. За цей час деякі сайти почали використовувати нові технології, які він не підтримує і не може коректно відобразити сторінку. Щоб це виправити, спробуйте встановити новий браузер.",
		"desc.ie": "Браузер, яким ви користуєтесь, уже не підтримується або скоро позбудеться підтримки Microsoft, тому більше не оновлюватиметься. Це означає, що відкриті в ньому сайти можуть відображатися з помилками. Рекомендуємо вам знайти заміну.",
		"subtitle": "Будь ласка, оновіть його або встановіть %%.",
		"subtitle.ie": "Рекомендуємо вам встановити Internet Explorer 11 або %%.",
		"subtitle.ie.link.txt": "вибрати іншу програму для перегляду сторінок в інтернеті",
		"subtitle.link.href": "https://yandex.ua/soft/browsers/",
		"subtitle.link.txt": "новий",
		"title": "Ваш браузер %% застарів і не забезпечує повноцінну та безпечну роботу із сайтом",
		"title.general": "Ваш браузер застарів",
		"title.general.ie": "Ваш браузер застарів і більше не оновлюватиметься",
		"title.unknown": "Можливо, ваш браузер застарів і не забезпечує повноцінну та безпечну роботу із сайтом",
		"ver": "1.3.2"
	}
};
var Ya = window.Ya || {};
Ya.stripe = function () {
}, Ya.stripe.prototype = {}, window.JSON || (window.JSON = {
	parse: function (sJSON) {
		return eval("(" + sJSON + ")")
	}, stringify: function () {
		var e = Object.prototype.toString, t = Array.isArray || function (t) {
				return "[object Array]" === e.call(t)
			}, o = {'"': '\\"', "\\": "\\\\", "\b": "\\b", "\f": "\\f", "\n": "\\n", "\r": "\\r", "\t": "\\t"},
			i = function (e) {
				return o[e] || "\\u" + (e.charCodeAt(0) + 65536).toString(16).substr(1)
			}, n = /[\\"\u0000-\u001F\u2028\u2029]/g;
		return function r(o) {
			if (null == o) return "null";
			if ("number" == typeof o) return isFinite(o) ? o.toString() : "null";
			if ("boolean" == typeof o) return o.toString();
			if ("object" == typeof o) {
				if ("function" == typeof o.toJSON) return r(o.toJSON());
				if (t(o)) {
					for (var s = "[", p = 0; p < o.length; p++) s += (p ? ", " : "") + r(o[p]);
					return s + "]"
				}
				if ("[object Object]" === e.call(o)) {
					var a = [];
					for (var l in o) o.hasOwnProperty(l) && a.push(r(l) + ": " + r(o[l]));
					return "{" + a.join(", ") + "}"
				}
			}
			return '"' + o.toString().replace(n, i) + '"'
		}
	}()
}), Function.prototype.bind || (Function.prototype.bind = function (e) {
	if ("function" != typeof this) throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
	var t = Array.prototype.slice.call(arguments, 1), o = this, i = function () {
	}, n = function () {
		return o.apply(this instanceof i ? this : e, t.concat(Array.prototype.slice.call(arguments)))
	};
	return i.prototype = this.prototype, n.prototype = new i, n
}), Object.keys || (Object.keys = function () {
	"use strict";
	var e = Object.prototype.hasOwnProperty, t = !{toString: null}.propertyIsEnumerable("toString"),
		o = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],
		i = o.length;
	return function (n) {
		if ("object" != typeof n && ("function" != typeof n || null === n)) throw new TypeError("Object.keys called on non-object");
		var r, s, p = [];
		for (r in n) e.call(n, r) && p.push(r);
		if (t) for (s = 0; s < i; s++) e.call(n, o[s]) && p.push(o[s]);
		return p
	}
}()), Ya.stripe.utils = function () {
}, Ya.stripe.utils.prototype = {}, Ya.stripe.utils.prototype.extend = function (e) {
	for (var t = 1; t < arguments.length; t++) {
		var o = arguments[t];
		for (var i in o) o.hasOwnProperty(i) && (e[i] = o[i])
	}
	return e
}, Ya.stripe.utils.prototype.isFunction = function (e) {
	var t = {};
	return e && "[object Function]" === t.toString.call(e)
}, Ya.stripe.utils.prototype.isString = function (e) {
	return "string" == typeof e || e instanceof String
}, Ya.stripe.utils.prototype.validateCallback = function (e) {
	return this.isFunction(e) ? e : !(!this.isString(e) || !this.isFunction(window[e])) && window[e]
}, Ya.stripe.utils.prototype.cookieApi = function () {
	function e(o, i, n) {
		var r;
		if (arguments.length > 1) {
			if (n = t.extend({path: "/"}, e.defaults, n), "number" == typeof n.expires) {
				var s = new Date;
				s.setMilliseconds(s.getMilliseconds() + 864e5 * n.expires), n.expires = s
			}
			try {
				r = JSON.stringify(i), /^[\{\[]/.test(r) && (i = r)
			} catch (p) {
			}
			return i = encodeURIComponent(String(i)), i = i.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), o = encodeURIComponent(String(o)), o = o.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent), o = o.replace(/[\(\)]/g, escape), document.cookie = [o, "=", i, n.expires && "; expires=" + n.expires.toUTCString(), n.path && "; path=" + n.path, n.domain && "; domain=" + n.domain, n.secure ? "; secure" : ""].join("")
		}
		o || (r = {});
		for (var a = document.cookie ? document.cookie.split("; ") : [], l = /(%[0-9A-Z]{2})+/g, c = 0; c < a.length; c++) {
			var u = a[c].split("="), d = u[0].replace(l, decodeURIComponent), m = u.slice(1).join("=");
			'"' === m.charAt(0) && (m = m.slice(1, -1));
			try {
				if (m = m.replace(l, decodeURIComponent), this.json) try {
					m = JSON.parse(m)
				} catch (p) {
				}
				if (o === d) {
					r = m;
					break
				}
				o || (r[d] = m)
			} catch (p) {
			}
		}
		return r
	}

	var t = this;
	return e.get = e.set = e, e.getJSON = function () {
		return e.apply({json: !0}, [].slice.call(arguments))
	}, e.defaults = {}, e.remove = function (o, i) {
		e(o, "", t.extend(i, {expires: -1}))
	}, e
}, Ya.stripe.utils.prototype.cookie = Ya.stripe.utils.prototype.cookieApi(), Ya.stripe.utils.prototype.onDOMContentLoaded = function (e, t) {
	function o() {
		if (!s) {
			if (!t.body) return setTimeout(o, 13);
			if (s = !0, a) {
				for (var e, i = 0; e = a[i++];) e.call(null);
				a = null
			}
		}
	}

	function i() {
		if (!p) {
			if (p = !0, "complete" === t.readyState) return o();
			if (t.addEventListener) t.addEventListener("DOMContentLoaded", r, !1), e.addEventListener("load", o, !1); else if (t.attachEvent) {
				t.attachEvent("onreadystatechange", r);
				try {
					e.attachEvent("onload", o)
				} catch (i) {
				}
				var s = !1;
				try {
					s = null == e.frameElement
				} catch (i) {
				}
				try {
					docElem && docElem.doScroll && s && n()
				} catch (i) {
				}
			}
		}
	}

	function n() {
		if (!s) {
			try {
				docElem.doScroll("left")
			} catch (e) {
				return void setTimeout(n, 1)
			}
			o()
		}
	}

	var r, s = !1, p = !1, a = [];
	return t.addEventListener ? r = function () {
		t.removeEventListener("DOMContentLoaded", r, !1), o()
	} : t.attachEvent && (r = function () {
		"complete" === t.readyState && (t.detachEvent("onreadystatechange", r), o())
	}), function (e) {
		i(), s ? e.call(null) : a.push(e)
	}
}(window, document), Ya.stripe.utils.prototype.DomElem = function (e, t) {
	t = t || {};
	var o = document.createElement(e), i = t.css, n = t.attrs;
	n && Ya.stripe.utils.prototype.extend(o, n), this.domElem = o, i && (this.domElem.className = this._className(i.className), this.css = this._buildCss(i))
}, Ya.stripe.utils.prototype.DomElem.prototype = {
	_className: function (e) {
		var t = e;
		return e instanceof Array && (t = e.join(" ")), t
	}, _buildCss: function (e) {
		var t, o = (e.className, e.props);
		for (var i in o) o.hasOwnProperty(i) && (t = this._toLowerCamelCase(i), this.domElem.style[t] = o[i])
	}, _toLowerCamelCase: function (e) {
		e = e.split("-");
		var t = e[0];
		e.shift();
		for (var o in e) e.hasOwnProperty(o) && (t += e[o].charAt(0).toUpperCase() + e[o].substr(1));
		return t
	}, _removeEvent: function () {
		return document.removeEventListener ? function (e, t, o) {
			e.removeEventListener(t, o, !1)
		} : function (e, t, o) {
			e.detachEvent("on" + t, o)
		}
	}, _addEvent: function () {
		return document.addEventListener ? function (e, t, o) {
			e.addEventListener(t, o, !1)
		} : function (e, t, o) {
			e.attachEvent("on" + t, o)
		}
	}, getStyle: function (e, t) {
		var o = "";
		return document.defaultView && document.defaultView.getComputedStyle ? o = document.defaultView.getComputedStyle(e, "").getPropertyValue(t) : e.currentStyle && (t = t.replace(/\-(\w)/g, function (e, t) {
			return t.toUpperCase()
		}), o = e.currentStyle[t]), o
	}, on: function (e, t) {
		var o = this;
		return this._addEvent()(o.domElem, e, t), this
	}, append: function (e) {
		return this.domElem.appendChild(e.domElem), this
	}
}, Ya.stripe.utils.prototype.jsonp = function (e, t, o) {
	var i = "jsonp65397e1a32a9406289f95f602d15882c", n = function (e) {
		delete window[i], document.body.removeChild(s), o(e)
	};
	window[i] = n, t.jsonp = i, e += "?";
	for (var r in t) t.hasOwnProperty(r) && (e = e + r + "=" + t[r] + "&");
	var s = document.createElement("script");
	s.src = e, document.body.appendChild(s)
}, Ya.stripe.init = function (e) {
	this.init(e)
}, Ya.stripe.init.prototype = {
	options: {
		theme: "yellow",
		lang: "ru",
		browsers: {
			chromium: 34,
			iron: 34,
			flock: "Infinity",
			palemoon: 24,
			camino: "Infinity",
			safari: 5.1,
			yandexinternet: "Infinity",
			fx: 30,
			ie: 8,
			yabrowser: 14.12,
			opera: 15,
			chrome: 34,
			maxthon: 4.3,
			seamonkey: 2.3
		},
		remember: !0,
		rememberFor: 30,
		cookiePrefix: "yaBrowserUpdater",
		classNamePrefix: "ya-browser-updater",
		jsonpCallback: "yaBrowserUpdaterJSONPCallback",
		onStripeShow: null,
		onStripeHide: null,
		exclusive: !1,
		generic: !1,
		useLink: !0,
		hybrid: !1,
		metrikaId: null,
		colors: {},
		linkParams: null,
		domain: null,
		yaBroDomain: "ru"
	},
	themes: {
		stripe: {
			yellow: {bg: "#ffdc3a", txt: "#000", button: "#f1ce2e", close: "#efce36"},
			red: {bg: "#f00", txt: "#fff", button: "#e10202", close: "#e63232"},
			blue: {bg: "#7dcef9", txt: "#fff", button: "#67b5e0", close: "#5bb9ef"},
			green: {bg: "#84cd78", txt: "#fff", button: "#7dbe72", close: "#81c176"},
			white: {bg: "#fff", txt: "#000", button: "#f0f0f0", close: "#f9f7f7"},
			black: {bg: "#000", txt: "#fff", button: "#333", close: "#404040"},
			grey: {bg: "#cbcbcb", txt: "#000", button: "#cbcbcb", close: "#bfbbbb"}
		}, generic: {bg: "#333", link: "#0398d7", txt: "#a6a4a4", title: "#fff", subtitle: "#fff", close: "#666"}
	},
	colors: {},
	bundleUrl: "/stripe/",
	popups: {choice: "/choice/", exclusive: "/exclusive/"},
	uaHost: "https://browser-updater.yandex.net",
	i18n: null,
	utils: new Ya.stripe.utils,
	type: null,
	subtype: "default",
	browser: null,
	browserVersion: null,
	isCheckUa: !0,
	isPopupShown: !1,
	domElems: {},
	style: "",
	bodyPadding: "",
	metrikaIds: {stripe: "32024286", generic: "32039916", exclusive: "32024286"},
	init: function (e) {
		e = e || {};
		var t = e.env, o = (e.version, {
				testing: "https://yastatic.net/s3/distribution/soft/browser-updater-react/v" + e.version,
				dev: "https://localhost.msup.yandex.ru"
			}[t] || "https://yastatic.net/browser-updater"),
			i = {ru: "ru", by: "by", com: "com", "com.tr": "com.tr", kz: "kz", ua: "ua", net: "net"};
		return this.bundleUrl = o + this.bundleUrl, this.popups.choice = o + this.popups.choice, this.popups.exclusive = o + this.popups.exclusive, this.partnerId = e.partnerId, this.yaBroDomain = i[e.yaBroDomain] || this.options.yaBroDomain, this.utils.extend(this.options, e), this.cookieHideCheck().checkUA(), this
	},
	cookieHideCheck: function () {
		if (this.options.remember) {
			var e = this.utils.cookie(this.options.cookiePrefix + "Hide");
			this.isCheckUa = "true" !== e
		}
		return this
	},
	cookieHideSet: function () {
		this.options.remember && this.utils.cookie(this.options.cookiePrefix + "Hide", "true", {
			expires: this.options.rememberFor,
			domain: this.options.domain,
			path: "/"
		})
	},
	checkUA: function () {
		if (!this.isCheckUa) return this;
		var e = this, t = document.createElement("script"),
			o = e.uaHost + "?browserUpdate=" + encodeURIComponent(JSON.stringify(e.options.browsers)) + "&jsonp=" + this.options.jsonpCallback;
		return window[e.options.jsonpCallback] = e.process.bind(e), t.src = o, document.body.appendChild(t), this
	},
	getColors: function () {
		var e = "generic" === this.type ? this.themes.generic : this.themes.stripe[this.options.theme];
		return this.colors = "object" == typeof this.options.colors ? this.utils.extend(e, this.options.colors) : e, this
	},
	getLinkParams: function () {
		var e = "object" == typeof this.options.linkParams && null !== this.options.linkParams && this.options.linkParams;
		return e ? "linkParams=" + encodeURIComponent(JSON.stringify(e)) : ""
	},
	process: function (e) {
		if (window[this.options.jsonpCallback] = void 0, this.browser = e.browser, this.browserVersion = e.version, this.exclusiveBrowser = this.options.exclusive && ("string" == typeof this.options.browsers && this.options.browsers || "object" == typeof this.options.browsers && Object.keys(this.options.browsers)[0]), this.needUpdate = e.needUpdate || this.options.exclusive && this.browser != this.exclusiveBrowser, !this.needUpdate || this.browser && "amigo" === this.browser.toLowerCase()) return !1;
		if (this.options.exclusive) this.type = "exclusive"; else if (this.options.generic) this.type = "generic", this.subtype = "ie" === this.browser ? "ie" : this.subtype; else switch (this.type = "stripe", this.browser) {
			case"chromium":
			case"iron":
				this.subtype = "chromium";
				break;
			case"flock":
			case"palemoon":
			case"camino":
			case"safari":
				this.subtype = "old";
				break;
			case"yabrowser":
			case"fx":
			case"ie":
			case"opera":
			case"chrome":
			case"maxthon":
			case"seamonkey":
				this.subtype = "outdated";
				break;
			default:
				this.subtype = "unknown"
		}
		this.i18n = new Ya.i18n(this.options.lang), this.getColors().build()
	},
	buildElem: function () {
		var e = this, t = function () {
			var t = e.options.classNamePrefix, o = Array.prototype.slice.call(arguments);
			return o.unshift(t), o.join("__")
		}, o = {
			stripe: {
				close: function () {
					var o = new e.utils.DomElem("div", {
						css: {
							className: t("stripe", "close"),
							props: {
								cursor: "pointer",
								"float": "right",
								height: "30px",
								width: "16px",
								"vertical-align": "middle",
								position: "absolute",
								top: "0",
								right: "52px",
								"font-size": "30px",
								"line-height": "32px",
								color: e.colors.close
							}
						}, attrs: {innerHTML: "&times;"}
					}).on("click", function () {
						e.removestripe.bind(e)(), e.cookieHideSet.bind(e)(), e.reachGoal.bind(e, "clck_stripe_close")()
					});
					return o
				}, txt: function () {
					var o = new e.utils.DomElem("span", {
						attrs: {innerHTML: "unknown" === e.subtype ? e.i18n["title.unknown"] : e.i18n.title.replace("%%", e.i18n["browser." + e.browser] + " " + e.browserVersion)},
						css: {className: t("stripe", "txt"), props: {color: e.colors.txt, "white-space": "nowrap"}}
					});
					return o
				}, button: function () {
					var o = {
						chromium: {txt: e.i18n["button.download"], goal: "clck_stripe_dnld"},
						old: {txt: e.i18n["button.download"], goal: "clck_stripe_dnld"},
						outdated: {txt: e.i18n["button.update"], goal: "clck_stripe_upd"},
						unknown: {txt: e.i18n["button.download"], goal: "clck_stripe_dnld"}
					}[e.subtype], i = new e.utils.DomElem("div", {
						css: {
							className: t("stripe", "button"),
							props: {
								display: "inline-block",
								padding: "0 15px",
								margin: "0 78px 0 0",
								cursor: "pointer",
								background: e.colors.button,
								color: e.colors.txt
							}
						}, attrs: {innerHTML: o.txt}
					}).on("click", function () {
						e.popupShow.bind(e)(), e.reachGoal.bind(e, o.goal)()
					});
					return i
				}, buttonWrap: function () {
					var o = new e.utils.DomElem("div", {
						css: {
							className: t("stripe", "button-wrap"),
							props: {position: "absolute", top: 0, right: 0, background: e.colors.bg}
						}
					});
					return o.append(this.button()).append(this.close()), o
				}
			}, generic: {
				close: function () {
					var o = new e.utils.DomElem("div", {
						css: {
							className: t("stripe", "close"),
							props: {
								cursor: "pointer",
								"float": "right",
								height: "30px",
								width: "16px",
								"vertical-align": "middle",
								"font-size": "30px",
								"line-height": "32px",
								position: "absolute",
								top: "5px",
								right: "10px",
								color: e.colors.close
							}
						}, attrs: {innerHTML: "&times;"}
					}).on("click", function () {
						e.removestripe.bind(e)(), e.cookieHideSet.bind(e)(), e.reachGoal.bind(e, "clck_stripe_close")()
					});
					return o
				}, title: function () {
					var o = new e.utils.DomElem("h1", {
						attrs: {innerHTML: e.i18n["title.general." + e.subtype] || e.i18n["title.general"]},
						css: {
							className: t("stripe", "title"),
							props: {
								margin: 0,
								padding: 0,
								"font-size": "33px",
								"font-weight": "normal",
								color: e.colors.title
							}
						}
					});
					return o
				}, subtitle: function () {
					var o = (e.i18n["subtitle." + e.subtype] || e.i18n.subtitle).split("%%"),
						i = new e.utils.DomElem("h2", {
							css: {
								className: t("stripe", "subtitle"),
								props: {
									margin: "18px 0 0px",
									padding: 0,
									"font-size": "20px",
									"font-weight": "normal",
									color: e.colors.subtitle
								}
							}
						});
					return i.domElem.appendChild(document.createTextNode(o[0])), e.options.useLink && (e.i18n["subtitle." + e.subtype + ".link.href"] || e.i18n["subtitle.link.href"]) ? i.append(this.link()) : i.domElem.appendChild(document.createTextNode(e.i18n["subtitle." + e.subtype + ".link.txt"] || e.i18n["subtitle.link.txt"])), i.domElem.appendChild(document.createTextNode(o[1])), i
				}, link: function () {
					var o = new e.utils.DomElem("a", {
						attrs: {
							href: e.i18n["subtitle." + e.subtype + ".link.href"] || e.i18n["subtitle.link.href"],
							target: "_blank",
							innerHTML: e.i18n["subtitle." + e.subtype + ".link.txt"] || e.i18n["subtitle.link.txt"]
						},
						css: {
							className: t("stripe", "subtitle", "link"),
							props: {color: e.colors.link, "text-decoration": "none"}
						}
					}).on("click", function (t) {
						if (e.reachGoal.bind(e, "clck_new")(), e.options.hybrid) return t.preventDefault(), e.popupShow.bind(e)(), !1
					});
					return o
				}, desc: function () {
					var o = new e.utils.DomElem("div", {
						attrs: {innerHTML: e.i18n["desc." + e.subtype] || e.i18n.desc},
						css: {
							className: t("stripe", "desc"),
							props: {
								margin: "15px 0 0",
								padding: 0,
								"font-size": "13px",
								"line-height": "22px",
								color: e.colors.txt
							}
						}
					});
					return e.style += o.css, o
				}
			}, popup: {
				paranja: function () {
					var o = new e.utils.DomElem("div", {
						css: {
							className: t("popup", "paranja"),
							props: {
								position: "fixed",
								"z-index": 32e3,
								top: 0,
								left: 0,
								width: "100%",
								height: "100%",
								padding: 0,
								"-webkit-user-select": "none",
								"-moz-user-select": "none",
								"-ms-user-select": "none",
								"user-select": "none",
								opacity: ".3",
								border: "0",
								background: "#000",
								"-ms-filter": "progid:DXImageTransform.Microsoft.Alpha(Opacity=33)",
								filter: "alpha(opacity=33)"
							}
						}
					}).on("click", function () {
						e.popupRemove.bind(e)(), e.reachGoal.bind(e, "clck_popup_close")()
					});
					return o
				}, close: function () {
					var o = new e.utils.DomElem("div", {
						css: {
							className: t("popup", "close"),
							props: {
								position: "absolute",
								top: "5px",
								right: "5px",
								width: "16px",
								height: "30px",
								padding: "0 10px 0 0",
								cursor: "pointer",
								background: "url(" + e.bundleUrl + "img/popup__close.png) 0 100% no-repeat"
							}
						}
					}).on("click", function () {
						e.popupRemove.bind(e)(), e.reachGoal.bind(e, "clck_popup_close")()
					});
					return o
				}, iframe: function () {
					var o = {
							ru: {chromium: "370px", old: "370px", outdated: "330px", unknown: "300px"},
							tr: {
								chromium: "370px",
								outdated: "ie" === e.browser ? "330px" : "300px",
								old: "340px",
								unknown: "300px"
							},
							uk: {
								chromium: "330px",
								outdated: "ie" === e.browser ? "350px" : "330px",
								old: "370px",
								unknown: "300px"
							},
							en: {
								chromium: "370px",
								outdated: "ie" === e.browser ? "330px" : "300px",
								old: "340px",
								unknown: "300px"
							}
						}, i = e.options.metrikaId || (e.options.hybrid ? e.metrikaIds.generic : e.metrikaIds.stripe),
						n = e.options.hybrid ? "outdated" : e.subtype,
						r = e.options.hybrid ? "generic" : e.options.theme, s = e.getLinkParams(),
						p = e.popups.choice + n + "." + e.options.lang + ".html?metrikaId=" + i + "&theme=" + r + "&_ver=" + e.i18n.ver + (e.partnerId ? "&partner_id=" + e.partnerId + "&yabro_domain=" + e.yaBroDomain : "") + "&v=" + e.options.v || String(s && "&" + s),
						a = new e.utils.DomElem("iframe", {
							attrs: {name: t("popup", "iframe"), src: p, scrolling: "no"},
							css: {
								className: t("popup", "iframe"),
								props: {width: "100%", border: 0, overflow: "hidden", height: o[e.options.lang][n]}
							}
						});
					return a.domElem.setAttribute("frameBorder", "0"), a
				}, wrap: function () {
					var o = new e.utils.DomElem("div", {
						css: {
							className: t("popup", "wrap"),
							props: {
								position: "fixed",
								"z-index": "32700",
								top: "50%",
								left: "50%",
								width: "670px",
								"margin-top": "-240px",
								"margin-left": "-400px",
								padding: "40px 65px",
								"text-align": "center",
								color: "#333",
								background: "#fff",
								"-webkit-box-shadow": "inset 0 0 0 1px rgba(0,0,0,.15),0 8px 30px -5px rgba(0,0,0,.5)",
								"-moz-box-shadow": "inset 1px 1px 10px #aaa",
								"box-shadow": "inset 0 0 0 1px rgba(0,0,0,.15),0 8px 30px -5px rgba(0,0,0,.5)"
							}
						}
					});
					return o.append(this.close()).append(this.iframe()), o
				}
			}, exclusive: {
				iframe: function () {
					var o = e.options.metrikaId || e.metrikaIds.exclusive, i = e.getLinkParams(),
						n = e.popups.exclusive + e.exclusiveBrowser + "." + e.options.lang + ".html?metrikaId=" + o + (i && "&" + i),
						r = new e.utils.DomElem("iframe", {
							attrs: {name: t("popup", "iframe"), src: n, scrolling: "no"},
							css: {className: t("popup", "iframe"), props: {width: "100%", height: "100%", border: 0}}
						});
					return r.domElem.setAttribute("frameBorder", "0"), r
				}
			}
		};
		return {
			stripe: function () {
				var i = new e.utils.DomElem("div", {
					css: {
						className: t("stripe"),
						props: {
							position: "fixed",
							"z-index": "90000",
							left: "0",
							top: "0",
							width: "100%",
							font: "13px Arial, Helvetica, sans-serif",
							"line-height": "30px",
							"padding-left": "42px",
							background: e.colors.bg,
							overflow: "hidden"
						}
					}
				});
				return i.append(o.stripe.txt()).append(o.stripe.buttonWrap()), e.domElems.stripe = i, i
			}, generic: function () {
				var i = new e.utils.DomElem("div", {
					css: {
						className: t("stripe"),
						props: {
							position: "relative",
							padding: "40px 5%",
							width: "90%",
							overflow: "hidden",
							font: "13px Arial, Helvetica, sans-serif",
							"line-height": "30px",
							background: e.colors.bg
						}
					}
				});
				return i.append(o.generic.close()).append(o.generic.title()).append(o.generic.subtitle()).append(o.generic.desc()), e.domElems.stripe = i, i
			}, popup: function () {
				var i = new e.utils.DomElem("div", {css: {className: t("popup"), props: {display: "none"}}});
				return i.append(o.popup.paranja()).append(o.popup.wrap()), e.domElems.popup = i, i
			}, exclusive: function () {
				var i = new e.utils.DomElem("div", {
					css: {
						className: t("popup"),
						props: {
							display: "block",
							position: "fixed",
							top: "0",
							left: "0",
							width: "100%",
							height: "100%",
							background: "#fff",
							padding: "0"
						}
					}
				});
				return i.append(o.exclusive.iframe()), e.domElems.popup = i, i
			}, style: function () {
				var t = e.style, o = new e.utils.DomElem("style", {type: "text/css"});
				try {
					o.domElem.appendChild(document.createTextNode(t))
				} catch (i) {
					o.domElem.setAttribute("type", "text/css"), o.domElem.styleSheet.cssText = t
				}
				return o
			}, metrika: function () {
				var t = new e.utils.DomElem("script", {
					attrs: {
						src: "https://mc.yandex.ru/metrika/watch.js",
						type: "text/javascript"
					}
				});
				return e.domElems.metrika = t, t
			}
		}
	},
	metrikaInit: function () {
		var e = this, t = "yandex_metrika_callbacks", o = e.options.metrikaId || e.metrikaIds[e.type],
			i = "stripe" === e.type ? {theme: e.options.theme} : {};
		e.counter = "yaCounter" + o, (window[t] = window[t] || []).push(function () {
			try {
				window[e.counter] = new Ya.Metrika({
					id: o,
					clickmap: !0,
					trackLinks: !0,
					accurateTrackBounce: !0,
					webvisor: !0,
					trackHash: !0,
					params: i
				})
			} catch (t) {
			}
		})
	},
	reachGoal: function (e) {
		var t = this;
		try {
			window[t.counter].reachGoal(e)
		} catch (o) {
		}
	},
	build: function () {
		var e = this;
		e.buildElem = this.buildElem(), e.utils.onDOMContentLoaded(function () {
			var t, o;
			if ("exclusive" === e.type) {
				var i = e.buildElem.exclusive();
				document.body.appendChild(i.domElem), document.body.style.overflow = "hidden"
			} else "generic" === e.type ? (t = e.buildElem.generic(), document.body.insertBefore(t.domElem, document.body.firstChild), e.options.hybrid && (o = e.buildElem.popup(), document.body.appendChild(o.domElem)), e.onStripeShowCallback()) : (t = e.buildElem.stripe(), o = e.buildElem.popup(), e.bodyPaddingAdjust(30), document.body.insertBefore(t.domElem, document.body.firstChild), document.body.appendChild(o.domElem), e.onStripeShowCallback());
			var n = e.buildElem.metrika();
			document.body.appendChild(n.domElem), e.metrikaInit()
		})
	},
	bodyPaddingAdjust: function (e) {
		var t = this.utils.DomElem.prototype.getStyle(document.body, "padding-top");
		this.bodyPadding = parseInt(t, 10), document.body.style.paddingTop = this.bodyPadding + e + "px"
	},
	popupShow: function () {
		this.isPopupShown || (this.domElems.popup.domElem.style.display = "block", this.isPopupShown = !0, this.removestripe())
	},
	popupRemove: function () {
		document.body.removeChild(this.domElems.popup.domElem)
	},
	removestripe: function () {
		document.body.removeChild(this.domElems.stripe.domElem);
		try {
			document.body.style.paddingTop = this.bodyPadding + "px"
		} catch (e) {
		}
		this.onStripeHideCallback()
	},
	onStripeShowCallback: function () {
		var e = this.utils.validateCallback(this.options.onStripeShow);
		e !== !1 && e()
	},
	onStripeHideCallback: function () {
		var e = this.utils.validateCallback(this.options.onStripeHide);
		e !== !1 && e()
	}
}, Ya.strip = Ya.stripe;
var ya = window.ya || {};
ya.browserUpdater = Ya.stripe;

const collection = document.querySelectorAll('.block');
const links = document.querySelectorAll('.menu__body a');
const $item = document.querySelectorAll('.menu__body li');
const header = document.querySelector('.header');

// let scrollDistance = window.scrollY;

// window.addEventListener('scroll', () => {
// 	scrollDistance = window.scrollY;
//
// 	for (let i = 0; i < collection.length; i++) {
// 		const el = collection[i];
//
// 		if (el.offsetTop - header.clientHeight <= scrollDistance) {
// 			for (let j = 0; j < links.length; j++) {
// 				const $el = links[j];
// 				if ($el.classList.contains('_active')) {
// 					$el.classList.remove('_active');
// 				}
// 			}
//
// 			$item[i].querySelector('a').classList.add('_active');
// 			links[i].classList.add('_active');
// 		}
// 	}
// });


let lastId,
	topMenu = $(".menu__list"),
	topMenuHeight = topMenu.outerHeight() + 15,
	menuItems = topMenu.find("a"),
	scrollItems = menuItems.map(function () {
		const item = $($(this).attr("href"));
		if (item.length) {
			return item;
		}
	});

menuItems.click(function(e){
	const href = $(this).attr("href"),
		offsetTop = href === "#" ? 0 : $(href).offset().top - topMenuHeight + 1;
	$('html, body').stop().animate({
		scrollTop: offsetTop
	}, 300);
	e.preventDefault();
});

$(window).scroll(function(){
	const fromTop = $(this).scrollTop() + topMenuHeight;
	let cur = scrollItems.map(function () {
		if ($(this).offset().top < fromTop)
			return this;
	});

	cur = cur[cur.length-1];
	const id = cur && cur.length ? cur[0].id : "";

	if (lastId !== id) {
		lastId = id;
		menuItems
			.parent().removeClass("_active")
			.end().filter("[href='#"+id+"']").parent().addClass("_active");
	}
});




// обеспечиваем короссбраузерноть для использования встроенного
// в браузеры API requestAnimationFrame

(function () {
	const requestAnimationFrame = window.requestAnimationFrame ||
		window.mozRequestAnimationFrame ||
		window.webkitRequestAnimationFrame ||
		window.msRequestAnimationFrame;
	window.requestAnimationFrame = requestAnimationFrame;

	const menu = document.querySelector('.menu__list'),
		items = menu.querySelectorAll('a'),
		containers = document.querySelectorAll('.page > div');

	const pageHeight = Math.max(
		document.body.scrollHeight, document.documentElement.scrollHeight,
		document.body.offsetHeight, document.documentElement.offsetHeight,
		document.body.clientHeight, document.documentElement.clientHeight
	);

	menu.onclick = function (e) {
		e.preventDefault();
		if (e.target.tagName !== 'A') return;
		const current = switchLinks(e.target);
		selectContainer(current);
	}

	function switchLinks(el) {
		let current;
		[].forEach.call(items, function (item, index) {
			// item.classList.remove('_active');
			if (item === el) {
				// item.classList.add('_active');
				current = index;
			}
		});
		return current;
	}

	function selectContainer(current) {
		[].forEach.call(containers, function (container, index) {
			if (index === current) {
				const startY = container.getBoundingClientRect().top - 50,
					direction = (startY < 0) ? -1 : (startY > 0) ? 1 : 0;
				if (direction === 0) return;
				scroll(container, direction);
			}
		});
	}

	function scroll(el, direction) {
		const duration = 2000,
			start = new Date().getTime();

		const fn = function () {
			let top = el.getBoundingClientRect().top - 50,
				now = new Date().getTime() - start,
				result = Math.round(top * now / duration);
			result = (result > direction * top) ? top : (result === 0) ? direction : result;
			if (direction * top > 0 && (pageHeight - window.pageYOffset) > direction * document.documentElement.clientHeight) {
				window.scrollBy(0, result);
				requestAnimationFrame(fn);
			}
		};
		requestAnimationFrame(fn);
	}
})();





document.querySelector('#up3').addEventListener('click', function (e) {
	e.preventDefault();
	const scrolled = window.pageYOffset;
	backToTop();
});

function trackScroll() {
	var scrolled = window.pageYOffset;
	var coords = document.documentElement.clientHeight;

	if (scrolled > coords) {
		goTopBtn.classList.add('back_to_top-show');
	}
	if (scrolled < coords) {
		goTopBtn.classList.remove('back_to_top-show');
	}
}

function backToTop() {
	if (window.pageYOffset > 0) {
		window.scrollBy(0, 0);
		setTimeout(backToTop, 20);
	}
}

var goTopBtn = document.querySelector('#up');

window.addEventListener('scroll', trackScroll);
goTopBtn.addEventListener('click', backToTop);





function scrollTo(to, duration = 700) {
	const
		element = document.scrollingElement || document.documentElement,
		start = element.scrollTop,
		change = to - start,
		startDate = +new Date(),
		easeInOutQuad = function (t, b, c, d) {
			t /= d / 2;
			if (t < 1) return c / 2 * t * t + b;
			t--;
			return -c / 2 * (t * (t - 2) - 1) + b;
		},
		animateScroll = function () {
			const currentDate = +new Date();
			const currentTime = currentDate - startDate;
			element.scrollTop = parseInt(easeInOutQuad(currentTime, start, change, duration));
			if (currentTime < duration) {
				requestAnimationFrame(animateScroll);
			} else {
				element.scrollTop = to;
			}
		};
	animateScroll();
}

document.addEventListener('DOMContentLoaded', function () {
	let btn = document.querySelector('#up, #up2');
	window.addEventListener('scroll', function () {
		if (pageYOffset > 100) {
			btn.classList.add('_show');
		} else {
			btn.classList.remove('_show');
		}
	});
	btn.onclick = function (click) {
		click.preventDefault();
		// отступ, скорость
		scrollTo(0, 400);
	}
});

var ua = window.navigator.userAgent;
var msie = ua.indexOf("MSIE ");
var isMobile = { Android: function () { return navigator.userAgent.match(/Android/i); }, BlackBerry: function () { return navigator.userAgent.match(/BlackBerry/i); }, iOS: function () { return navigator.userAgent.match(/iPhone|iPad|iPod/i); }, Opera: function () { return navigator.userAgent.match(/Opera Mini/i); }, Windows: function () { return navigator.userAgent.match(/IEMobile/i); }, any: function () { return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows()); } };
function isIE() {
	ua = navigator.userAgent;
	var is_ie = ua.indexOf("MSIE ") > -1 || ua.indexOf("Trident/") > -1;
	return is_ie;
}
if (isIE()) {
	document.querySelector('html').classList.add('ie');
	var head  = document.getElementsByTagName("head")[0];
	var link  = document.createElement("link");
	link.rel  = "stylesheet";
	link.href = "css/IE.min.css";
	head.appendChild(link);
}
if (isMobile.any()) {
	document.querySelector('html').classList.add('_touch');
}

function testWebP(callback) {
	var webP = new Image();
	webP.onload = webP.onerror = function () {
		callback(webP.height == 2);
	};
	webP.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
}
testWebP(function (support) {
	if (support === true) {
		document.querySelector('html').classList.add('_webp');
	} else {
		document.querySelector('html').classList.add('_no-webp');
	}
});

function ibg() {
	if (isIE()) {
		let ibg = document.querySelectorAll("._ibg");
		for (var i = 0; i < ibg.length; i++) {
			if (ibg[i].querySelector('img') && ibg[i].querySelector('img').getAttribute('src') != null) {
				ibg[i].style.backgroundImage = 'url(' + ibg[i].querySelector('img').getAttribute('src') + ')';
			}
		}
	}
}
ibg();

window.addEventListener("load", function () {
	if (document.querySelector('.wrapper')) {
		setTimeout(function () {
			document.querySelector('.wrapper').classList.add('_loaded');
		}, 0);
	}
});
//====================================================================================================



if (isMobile.any()){
	document.querySelector('.intro__button').classList.remove('_no-touch');
	document.querySelector('.menu__list').classList.remove('_no-touch');
	document.querySelector('.works__body').classList.remove('_no-touch');
}

//=========================================header
document.addEventListener('DOMContentLoaded', () => {
	const onScrollHeader = () => {
		const header = document.querySelector('.header');
		let prevScroll = window.pageYOffset;
		let currentScroll;
		window.addEventListener('scroll', () => {
			currentScroll = window.pageYOffset;
			const headerHidden = () => header.classList.contains('_hidden');
			if (currentScroll > prevScroll && !headerHidden()) {
				header.classList.add('_hidden')
			}
			if (currentScroll < prevScroll && headerHidden()) {
				header.classList.remove('_hidden')
			}
			if (window.pageYOffset > 180) {
				header.classList.add('_visible')
			} else {
				header.classList.remove('_visible')
			}
			prevScroll = currentScroll
		})
	};
	onScrollHeader()
});
//=====================================menu
$('.icon-menu').click(function () {
	$('.icon-menu,.menu__body').toggleClass('_active');
	$('body').toggleClass('_lock');
});

$('.menu__link').click(function (event) {
	$('.icon-menu,.menu__body').removeClass('_active');
	$('body').removeClass('_lock');
});

$('#up, #up2, #up3').click(function () {
	$('html, body').animate({
		scrollTop: 0
	}, 1000);
	return false;
});
//====================================skills
$(window).scroll(function () {
	let height = $(window).scrollTop();
	if (height > 400) {
		$('.skills__progress').addClass('_animate');
	} else {
		$('.skills__progress').removeClass('_animate');
	}
});
//======================================
$('[data-fancybox=""]').fancybox({
});
//====================================up
let toTopBtn = document.querySelector('.up');
window.onscroll = function () {
	if (window.pageYOffset > 400) {
		toTopBtn.style.display = 'flex'
	} else {
		toTopBtn.style.display = 'none'
	}
};
//========================================

var $element = $('.footer');
var $up = $('.up');
var $window = $(window);

function check_if_in_view() {
	var window_height = $window.height();
	var window_top_position = $window.scrollTop();
	var window_bottom_position = (window_top_position + window_height);

	$.each($element, function() {
		var $elem = $(this);
		var element_height = $element.outerHeight();
		var element_top_position = $element.offset().top;
		var element_bottom_position = (element_top_position + element_height);

		if ((element_bottom_position >= window_top_position) &&
			(element_top_position <= window_bottom_position)) {
			$up.addClass('_is-visible');
		} else {
			$up.removeClass('_is-visible');
		}
	});
}

$window.on('scroll resize', check_if_in_view);
$window.trigger('scroll');


//==============================contact__btn
const contact = document.querySelector('.contact__btn');
contact.addEventListener('click', function () {
	const form = document.querySelector('.contact__box');
	form.classList.toggle('_open')
});



//=====================polifil
(function () {
	// проверяем поддержку
	if (!Element.prototype.closest) {
		// реализуем
		Element.prototype.closest = function (css) {
			var node = this;
			while (node) {
				if (node.matches(css)) return node;
				else node = node.parentElement;
			}
			return null;
		};
	}
})();
(function () {
	// проверяем поддержку
	if (!Element.prototype.matches) {
		// определяем свойство
		Element.prototype.matches = Element.prototype.matchesSelector ||
			Element.prototype.webkitMatchesSelector ||
			Element.prototype.mozMatchesSelector ||
			Element.prototype.msMatchesSelector;
	}
})();

var browserUpdater = new ya.browserUpdater.init(
	{
		theme: "yellow",
		lang: "ru",
		exclusive: false,
		browsers: {
			chromium: 35,
			iron: 35,
			flock: "Infinity",
			palemoon: 25,
			camino: "Infinity",
			safari: 5.2,
			yandexinternet: "Infinity",
			fx: 31,
			ie: 11,
			opera: 16,
			chrome: 35,
			maxthon: 4.4,
			seamonkey: 2.4
		},
		remember: true,
		rememberFor: 30,
		cookiePrefix: "yaBrowserUpdater",
		classNamePrefix: "ya-browser-updater",
		jsonpCallback: "yaBrowserUpdaterJSONPCallback",
		onStripeShow: null,
		onStripeHide: null
	});

filterSelection("all");

function filterSelection(c) {
	var x, i;
	x = document.getElementsByClassName("works__item");
	if (c === "all") c = "";
	// Добавить класс "show" (display:block) к отфильтрованным элементам и удалите класс "show" из элементов, которые не выбраны
	for (i = 0; i < x.length; i++) {
		w3RemoveClass(x[i], "_show");
		if (x[i].className.indexOf(c) > -1) w3AddClass(x[i], "_show");
	}
}

// Показать отфильтрованные элементы
function w3AddClass(element, name) {
	var i, arr1, arr2;
	arr1 = element.className.split(" ");
	arr2 = name.split(" ");
	for (i = 0; i < arr2.length; i++) {
		if (arr1.indexOf(arr2[i]) === -1) {
			element.className += " " + arr2[i];
		}
	}
}

// Скрыть элементы, которые не выбраны
function w3RemoveClass(element, name) {
	var i, arr1, arr2;
	arr1 = element.className.split(" ");
	arr2 = name.split(" ");
	for (i = 0; i < arr2.length; i++) {
		while (arr1.indexOf(arr2[i]) > -1) {
			arr1.splice(arr1.indexOf(arr2[i]), 1);
		}
	}
	element.className = arr1.join(" ");
}

// Добавить активный класс к текущей кнопке управления (выделите ее)
var btnContainer = document.getElementById("nav");
var btns = btnContainer.getElementsByClassName("nav-link");
for (var i = 0; i < btns.length; i++) {
	btns[i].addEventListener("click", function () {
		var current = document.getElementsByClassName("_active");
		current[0].className = current[0].className.replace(" _active", "");
		this.className += " _active";
	});
}


var box = document.getElementsByClassName('works__item');
var btn = document.getElementById('more');
for (let i = 3; i < box.length; i++) {
	box[i].classList.remove('_show');
}

var countD = 3;
btn.addEventListener("click", function () {
	var box = document.getElementsByClassName('works__item');
	countD += 3;
	if (countD <= box.length) {
		for (let i = 0; i < countD; i++) {
			box[i].classList.add('_show');
		}
	}

})

let unlock = true;

//=================
//BodyLock

function body_lock(delay) {
	let body = document.querySelector("body");
	if (body.classList.contains('_lock')) {
		body_lock_remove(delay);
	} else {
		body_lock_add(delay);
	}
}
function body_lock_remove(delay) {
	let body = document.querySelector("body");
	if (unlock) {
		let lock_padding = document.querySelectorAll("._lp");
		setTimeout(() => {
			for (let index = 0; index < lock_padding.length; index++) {
				const el = lock_padding[index];
				el.style.paddingRight = '0px';
			}
			body.style.paddingRight = '0px';
			body.classList.remove("_lock");
		}, delay);

		unlock = false;
		setTimeout(function () {
			unlock = true;
		}, delay);
	}
}
function body_lock_add(delay) {
	let body = document.querySelector("body");
	if (unlock) {
		let lock_padding = document.querySelectorAll("._lp");
		for (let index = 0; index < lock_padding.length; index++) {
			const el = lock_padding[index];
			el.style.paddingRight = window.innerWidth - document.querySelector('.wrapper').offsetWidth + 'px';
		}
		body.style.paddingRight = window.innerWidth - document.querySelector('.wrapper').offsetWidth + 'px';
		body.classList.add("_lock");

		unlock = false;
		setTimeout(function () {
			unlock = true;
		}, delay);
	}
}


//=================
//ActionsOnHash
if (location.hash) {
	const hsh = location.hash.replace('#', '');
	if (document.querySelector('.popup_' + hsh)) {
		popup_open(hsh);
	} else if (document.querySelector('div.' + hsh)) {
		_goto(document.querySelector('.' + hsh), 500, '');
	}
}



let popup_link = document.querySelectorAll('._popup-link');
let popups = document.querySelectorAll('.popup');
for (let index = 0; index < popup_link.length; index++) {
	const el = popup_link[index];
	el.addEventListener('click', function (e) {
		if (unlock) {
			let item = el.getAttribute('href').replace('#', '');
			let video = el.getAttribute('data-video');
			popup_open(item, video);
		}
		e.preventDefault();
	})
}
for (let index = 0; index < popups.length; index++) {
	const popup = popups[index];
	popup.addEventListener("click", function (e) {
		if (!e.target.closest('.popup__body')) {
			popup_close(e.target.closest('.popup'));
		}
	});
}

function popup_open(item, video = '') {
	let activePopup = document.querySelectorAll('.popup._active');
	if (activePopup.length > 0) {
		popup_close('', false);
	}
	let curent_popup = document.querySelector('.popup_' + item);
	if (curent_popup && unlock) {
		if (video != '' && video != null) {
			let popup_video = document.querySelector('.popup_video');
			popup_video.querySelector('.popup__video').innerHTML = '<iframe src="https://www.youtube.com/embed/' + video + '?autoplay=1"  allow="autoplay; encrypted-media" allowfullscreen></iframe>';
		}
		if (!document.querySelector('.menu__body._active')) {
			body_lock_add(500);
		}
		curent_popup.classList.add('_active');
		history.pushState('', '', '#' + item);
	}
}

function popup_close(item, bodyUnlock = true) {
	if (unlock) {
		if (!item) {
			for (let index = 0; index < popups.length; index++) {
				const popup = popups[index];
				let video = popup.querySelector('.popup__video');
				if (video) {
					video.innerHTML = '';
				}
				popup.classList.remove('_active');
			}
		} else {
			let video = item.querySelector('.popup__video');
			if (video) {
				video.innerHTML = '';
			}
			item.classList.remove('_active');
		}
		if (!document.querySelector('.menu__body._active') && bodyUnlock) {
			body_lock_remove(500);
		}
		history.pushState('', '', window.location.href.split('#')[0]);
	}
}

let popup_close_icon = document.querySelectorAll('.popup__close,._popup-close');
if (popup_close_icon) {
	for (let index = 0; index < popup_close_icon.length; index++) {
		const el = popup_close_icon[index];
		el.addEventListener('click', function () {
			popup_close(el.closest('.popup'));
		})
	}
}
document.addEventListener('keydown', function (e) {
	if (e.code === 'Escape') {
		popup_close();
	}
});

